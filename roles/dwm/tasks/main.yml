---
- name: "Checking for Distribution Config: {{ ansible_distribution }}"
  ansible.builtin.stat:
    path: "{{ role_path }}/tasks/{{ ansible_distribution }}.yml"
  register: dwm_distribution_config

- name: "Run Tasks: {{ ansible_distribution }}"
  ansible.builtin.include_tasks: "{{ ansible_distribution }}.yml"
  when: dwm_distribution_config.stat.exists

- name: "Build and install DWM and DwmBlocks"
  become: true
  loop:
    - dwm
    - dwmblocks
  community.general.make:
    target: all
    chdir: "{{ item }}"
    file: "{{ item }}/Makefile"
    make: /usr/bin/make
